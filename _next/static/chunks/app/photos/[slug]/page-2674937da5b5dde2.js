(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[710],{255:(e,t,n)=>{"use strict";function r(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return r}}),n(5155),n(7650),n(5744),n(589)},1469:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{default:function(){return s},getImageProps:function(){return a}});let r=n(8229),l=n(8883),o=n(3063),i=r._(n(1193));function a(e){let{props:t}=(0,l.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/lens-route/_next/image/",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,n]of Object.entries(t))void 0===n&&delete t[e];return{props:t}}let s=o.Image},2146:(e,t,n)=>{"use strict";function r(e){let{reason:t,children:n}=e;return n}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return r}}),n(5262)},3405:(e,t,n)=>{Promise.resolve().then(n.bind(n,6840))},4054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{bindSnapshot:function(){return i},createAsyncLocalStorage:function(){return o},createSnapshot:function(){return a}});let n=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class r{disable(){throw n}getStore(){}run(){throw n}exit(){throw n}enterWith(){throw n}static bind(e){return e}}let l="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function o(){return l?new l:new r}function i(e){return l?l.bind(e):r.bind(e)}function a(){return l?l.snapshot():function(e,...t){return e(...t)}}},5744:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return r.workAsyncStorageInstance}});let r=n(7828)},6645:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let r=n(8229)._(n(7357));function l(e,t){var n;let l={};"function"==typeof e&&(l.loader=e);let o={...l,...t};return(0,r.default)({...o,modules:null==(n=o.loadableGenerated)?void 0:n.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6840:(e,t,n)=>{"use strict";n.d(t,{default:()=>u});var r=n(5155),l=n(2115),o=n(6645);let i=n.n(o)()(()=>Promise.all([n.e(484),n.e(761),n.e(654)]).then(n.bind(n,4654)),{loadableGenerated:{webpack:()=>[4654]},ssr:!1,loading:()=>(0,r.jsx)("div",{className:"w-full h-full bg-[rgb(243,244,246)] flex items-center justify-center",children:"地图加载中..."})});function a(e){return(0,r.jsx)(i,{...e})}function s(e){let{photos:t,activePhotoIndex:n}=e,l=t.filter(e=>{var t;return null===(t=e.location)||void 0===t?void 0:t.coordinates});if(l.length<2)return(0,r.jsx)(r.Fragment,{});let o=l.map(e=>e.location.coordinates[0]),i=Math.min(...o),a=Math.max(...o)-i,s=e=>40+900*(e-i)/(a||1),c=l.map((e,t)=>{let n=s(e.location.coordinates[0]),r=50+10*Math.sin(.8*t);return"".concat(0===t?"M":"L"," ").concat(n," ").concat(r)}).join(" ");return(0,r.jsxs)("div",{className:"w-full overflow-hidden py-8 mb-12 border-t border-b border-gray-200",children:[(0,r.jsx)("h3",{className:"text-center text-gray-500 mb-4 text-sm font-light",children:"熊野古道徒步路线"}),(0,r.jsxs)("svg",{width:"100%",height:100,viewBox:"0 0 ".concat(980," ").concat(100),preserveAspectRatio:"xMidYMid meet",children:[(0,r.jsx)("path",{d:c,stroke:"#d80000",strokeWidth:"1.5",strokeDasharray:"5,5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),l.map((e,t)=>{var l;let o=s(e.location.coordinates[0]),i=50+10*Math.sin(.8*t),a=t===n;return(0,r.jsxs)("g",{className:a?"font-medium":"",children:[(0,r.jsx)("circle",{cx:o,cy:i,r:a?5:3,fill:a?"#000":"#d80000",stroke:"#fff",strokeWidth:"1"}),(null===(l=e.location)||void 0===l?void 0:l.name)&&(0,r.jsx)("text",{x:o,y:i-10,fontSize:a?"11":"10",textAnchor:"middle",fill:a?"#000":"#666",fontWeight:a?"medium":"normal",className:"select-none",children:e.location.name})]},t)})]})]})}var c=n(1469),d=n.n(c);function u(e){var t;let{post:n}=e,[o,i]=(0,l.useState)(null),c=(0,l.useRef)([]),u=e=>{var t;null===(t=c.current[e])||void 0===t||t.scrollIntoView({behavior:"smooth",block:"center"})};(0,l.useEffect)(()=>{null!==o&&u(o)},[o]);let f=e=>{let t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)};return(0,l.useEffect)(()=>{let e=()=>{let e=c.current.findIndex(e=>e&&f(e));-1!==e&&e!==o&&i(e)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[o]),(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row min-h-screen bg-white",children:[(0,r.jsxs)("div",{className:"w-full lg:w-1/2 p-4 pb-16 lg:overflow-y-auto lg:h-screen",children:[(0,r.jsxs)("header",{className:"py-6 mb-8",children:[(0,r.jsx)("h1",{className:"text-4xl font-light tracking-tight text-gray-900",children:n.title}),(0,r.jsxs)("div",{className:"mt-2 text-gray-600",children:[(0,r.jsx)("span",{children:new Date(n.date).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"})}),(null===(t=n.location)||void 0===t?void 0:t.name)&&(0,r.jsxs)("span",{className:"ml-2",children:["\xb7 ",n.location.name]})]})]}),(0,r.jsx)("div",{className:"prose max-w-none mb-8",children:(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:n.content||""}})}),(0,r.jsx)(s,{photos:n.photos,activePhotoIndex:o}),(0,r.jsx)("div",{className:"space-y-24 mt-8",children:n.photos.map((e,t)=>{var l;return(0,r.jsxs)("div",{ref:e=>{c.current[t]=e},className:"photo-item scroll-mt-8",onMouseEnter:()=>i(t),children:[(0,r.jsx)("div",{className:"relative w-full aspect-[4/3] bg-gray-100 overflow-hidden",children:(0,r.jsx)(d(),{src:function(e){let t="/lens-route";return e.startsWith("/")?"".concat(t).concat(e):"".concat(t,"/").concat(e)}("/images/".concat(n.slug,"/").concat(e.file)),alt:e.title||"",className:"object-cover transition-all duration-700 ease-in-out",fill:!0,sizes:"(max-width: 768px) 100vw, 50vw",priority:t<3})}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-light text-gray-900",children:e.title}),(null===(l=e.location)||void 0===l?void 0:l.name)&&(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:e.location.name}),e.description&&(0,r.jsx)("p",{className:"text-gray-700 mt-3 leading-relaxed",children:e.description})]})]},t)})})]}),(0,r.jsx)("div",{className:"w-full lg:w-1/2 h-[50vh] lg:h-screen sticky top-0 right-0 map-container",children:(0,r.jsx)(a,{photos:n.photos,activePhotoIndex:o,setActivePhotoIndex:i})})]})}},7357:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});let r=n(5155),l=n(2115),o=n(2146);function i(e){return{default:e&&"default"in e?e.default:e}}n(255);let a={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},s=function(e){let t={...a,...e},n=(0,l.lazy)(()=>t.loader().then(i)),s=t.loading;function c(e){let i=s?(0,r.jsx)(s,{isLoading:!0,pastDelay:!0,error:null}):null,a=!t.ssr||!!t.loading,c=a?l.Suspense:l.Fragment,d=t.ssr?(0,r.jsxs)(r.Fragment,{children:[null,(0,r.jsx)(n,{...e})]}):(0,r.jsx)(o.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(n,{...e})});return(0,r.jsx)(c,{...a?{fallback:i}:{},children:d})}return c.displayName="LoadableComponent",c}},7828:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return r}});let r=(0,n(4054).createAsyncLocalStorage)()}},e=>{var t=t=>e(e.s=t);e.O(0,[63,441,684,358],()=>t(3405)),_N_E=e.O()}]);